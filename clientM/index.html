
<canvas id="ctx" width="500" height="500" style="border:1px solid #000000"></canvas>
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.3/p5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.3/addons/p5.dom.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.3/addons/p5.sound.min.js"></script> -->
  <!-- <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script> -->
  <div style="display:none;">
    <img id="sourceR" src="clientM/img/goblinR.png" width="300" height="227" />
  </div>
  <div style="display:none;">
    <img id="sourceL" src="clientM/img/goblinL.png" width="300" height="227" />
  </div>
<script src="/socket.io/socket.io.js"></script>
<script>
    var socket = io();
    var ctx = document.getElementById("ctx").
    getContext("2d");
    ctx.font = '30px Arial';
    var goblinR = document.getElementById("sourceR");
    var goblinL = document.getElementById("sourceL");
    var usedGoblin = goblinR;
    socket.on('newPositions', function(data) {
        ctx.clearRect(0,0,500,500);
        for(var i  = 0; i < data.length; i ++) {
            if (data[i].facingLeft)
                usedGoblin = goblinL;
            else usedGoblin = goblinR;
            ctx.drawImage(usedGoblin, data[i].x - 50, data[i].y -50 , 100, 100);  
            //ctx.fillText(data[i].number, data[i].x, data[i].y);
        }
    });

    document.onkeydown = function(event) {
        if(event.keyCode == 68) {
            socket.emit('keyPress', {inputId: 'right', state: true});
            //usedGoblin = goblinR;
        }
        else if(event.keyCode == 83)
            socket.emit('keyPress', {inputId: 'down', state: true});
        else if(event.keyCode == 65) {
            socket.emit('keyPress', {inputId: 'left', state: true});
            //usedGoblin = goblinL;
        }
        else if(event.keyCode == 87)
            socket.emit('keyPress', {inputId: 'up', state: true});   
    }

    
    document.onkeyup = function(event) {
        if(event.keyCode == 68)
            socket.emit('keyPress', {inputId: 'right', state: false});
        else if(event.keyCode == 83)
            socket.emit('keyPress', {inputId: 'down', state: false});
        else if(event.keyCode == 65)
            socket.emit('keyPress', {inputId: 'left', state: false});
        else if(event.keyCode == 87)
            socket.emit('keyPress', {inputId: 'up', state: false});   
    }
   
    
</script>
<!-- <body>
  <script src="clientM/sketch.js"></script>
  <script src="clientM/blob.js"></script>
</body> -->

